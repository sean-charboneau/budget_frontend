extends layout

block extraHeader
	script(type="text/javascript" src="/js/register.js")

block content
	div.container
		div.row
			div.col-sm-6.col-md-4.col-md-offset-4
				h1.text-center.login-title Registration Details
					div.signup-wall
						form.form-signin(data-bind='submit: register')
							input.form-control(type='text', data-bind='value: username', name='username', placeholder='Username', required, autofocus)
							input.form-control.nomargin(type='password', data-bind='value: password', name='password', placeholder='Password', required)
							input.form-control(type='email', data-bind='value: email', name='email', placeholder='Email', required)
							input.form-control(type='text', data-bind='value: firstName', name='firstName', placeholder='First Name', required)
							input.form-control(type='text', data-bind='value: lastName', name='lastName', placeholder='Last Name', required)
							select.form-control(data-bind='options: currencies, optionsText: "display_name", value: selectedCurrency, optionsCaption: "Choose Home Currency"', required)
							button(class='btn btn-lg btn-primary btn-block', type='submit') Register
							span.clearfix
					#message
					h1.text-center.error-message(id='error-message') #{message}

	script.
		var vm = new RegisterViewModel();
		var currencies = !{currency};
		var currencyArr = [];
		for(var key in currencies) {
			if(currencies.hasOwnProperty(key)) {
				var curr = currencies[key];
				console.log(curr);
				currencyArr.push(curr);
			}
		}
		vm.currencies = ko.observableArray(currencyArr);
		
		$(document).ready(function() {
			console.log(vm.currencies());
			ko.applyBindings(vm);
		});